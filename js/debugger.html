<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="utf-8" />
    <title>Minigrace JavaScript backend - Debugger Documentation</title>
    <link type="text/css" rel="stylesheet" href="global.css" />
    <style type="text/css">
.interfacebox {
	border: 1px inset gray;
	padding: 3px 0px 9px 3px;}

#d p	{display: none;}
#Ddefault {display: block;}

#stderr_txt {width: 49.5%;}
#debugger {display: table;}
    </style>
    <script src="minigrace.in.js" type="text/javascript"></script>
    <script src="debugger.js" type="text/javascript"></script>
    <script type="text/javascript">
GraceDebugger.SetStatus = function (value) {
    var std_err = document.getElementById("stderr_txt");
    std_err.value += value + "\n";
    std_err.scrollTop = std_err.scrollHeight;
}

function describe(index) {
    var d = document.getElementById("d").getElementsByTagName("p");
    for (var i=0;i<d.length;i++) {
        d[i].style.display = "none";
    }
    document.getElementById(index).style.display = "inline";
}
    </script>
</head>
<body>
    <h2>Debugger Documentation</h2>

    <ol>
        <li>Interface</li>
        <li>Breakpoints</li>
        <li>Restart and Continue</li>
        <li>Step and Backstep</li>
        <li>Actual Workings</li>
        <li>Variables</li>
    </ol>

    <h3>Interface</h3>

    <div class="interfacebox" onmouseout='describe("Ddefault");'>
    <span onmouseover='describe("Dtoggle");'><input type="checkbox" id="debugtoggle" onchange="toggleDebugger()" checked />Debugger</span><br />
        <textarea id="stderr_txt" rows="9" cols="60" onmouseover='describe("Derr");'></textarea>
        <div id="text_areas">
            <div id="debugger">
                <table style="width: 100%;"><tr><td class="debugger_td_border">
                    <div id="debugger_buttons">
                        <button onmouseover='describe("Dback");'>Back-step</button>
                        <button onmouseover='describe("Drestart");'>Restart</button>
                        <button onmouseover='describe("Dcontinue");'>Continue</button>
                        <button onmouseover='describe("Dstep");'>Step</button>
                    </div>
                    
                    <div class="breakpoints">
                        <span onmouseover='describe("Dbreakpoints");'>Breakpoints <!--(<span id="debugger_module">main</span>)--></span>
                        <div id="breakpoints" onmouseover='describe("Dbreakpoint");'>
                            <span style="color: #aaa;">(No breakpoints added yet)</span>
                        </div>
                        <button onclick="GraceDebugger.breakpoints.add();" onmouseover='describe("Dadd");'>Add a breakpoint</button>
                        <input id="add_break" onmouseover='describe("Dadd");' />
                    </div>
                </td><td class="debugger_td_border">
                    <div id="debugger_vars_display" onmouseover='describe("Dvariables");'>
                         Variables: 
                         <div></div>
                    </div>
                </td></tr></table>
            </div>
        </div>
    </div>

    <div id="d">
        <p id="Ddefault" style="display: inline;">Mouse over parts of the interface above to see a quick explanation of what each part does.</p>
        <p id="Dtoggle"><b>Debugger Toggle:</b> Unchecking this checkbox will hide the debugger interface, checking it again will show it again.</p>
        <p id="Derr"><b>Standard Error:</b> This is the textarea where standard error and logging messages are printed to.</p>
        <p id="Dback"><b>Back-Step:</b> This button will take the debugger to the line just before whatever line it's currently stopped on.</p>
        <p id="Drestart"><b>Restart:</b> This button will run the debugger from the beginning to until it hits a breakpoint.</p>
        <p id="Dcontinue"><b>Continue:</b> This button will run the debugger past any previous stops until it hits it's next breakpoint.
        Note that this may make it stop for each cycle of a loop if there's a breakpoint set somewhere in the loop.</p>
        <p id="Dstep"><b>Step:</b> This button will take the debugger to the line just before whatever line it's currently stopped on.</p>
        <p id="Dbreakpoints"><b>breakpoints:</b> This is where the currently set breakpoints are listed.<!--
        The <u>(main)</u> lists the module the breakpoints will run in and will change if the module changes.--></p>
        <p id="Dbreakpoint"><b>Breakpoint:</b> This is a breakpoint.
        The number is the line where the program will stop if it reaches this point from being run by <b>Restart</b> or <b>Continue</b>.
        <b>Disable</b> will prevent this breakpoint from stopping the program, and <b>Enable</b> will enable the breakpoint to again possibly stop the program.
        <b>Remove</b> will completely remove the breakpoint.</p>
        <p id="Dadd"><b>Add a breakpoint:</b> Enter a number greater than or equal to 1 and click <b>Add a breakpoint</b> to add a breakpoint.</p>
        <p id="Dvariables"><b>Variable List:</b> This is where variables that are in existence at the time the program stops or is interrupted can be seen.</p>
    </div>


    <h3>Breakpoints</h3>
    <p>A Breakpoint is an intentional stopping point in the program.
    Place a breakpoint in the program by typing the line number you want to stop at and clicking the <b>Add a breakpoint</b> button.
    Remove a breakpoint by clicking <b>Remove</b>, disable it by clicking <b>Disable</b>.
    Breakpoints only stop the program if the program is started by clicking either the <b>Restart</b> or <b>Continue</b> buttons.</p>

    <h3>Restart and Continue</h3>
    <p>The <b>Restart</b> and <b>Continue</b> buttons run the program until it hits a breakpoint or finishes execution.</p>
    <b>Continue</b> will run the debugger past wherever the program last stopped until the next breakpoint,
    while <b>Restart</b> will stop at the first breakpoint the program encounters.</p>

    <h3>Step and Back-step</h3>
    <p><b>Step</b> will pause the program just after the last line the program paused on.
    <b>Back-Step</b> will pause the program just before the last line the program paused on.</p>

    <h3>Actual Workings</h3>
    <p>This Debugger does not actually pause the program mid-execution, but instead interrupts it based on line changes.
    It resumes by running the program again, but changing where the interrupt occurs so that it seems to stop and resume.
    Because of this, any non-deterministic behavior the program contains will as of now potentially cause unpredictable behavior.</p>

    <h3>Variables</h3>
    <p>All variables created in the current scope of the program should be displayed in the variables section,
    along with their values or something resembling their values.
    If the program is interrupted before a variable is declared, it will not appear in the display.</p>

</body>
</html>


<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="utf-8" />
    <title>Minigrace JavaScript backend</title>
    <link type="text/css" rel="stylesheet" href="global.css" />
    
    <script src="minigrace.in.js" type="text/javascript"></script>
    <script src="samples.js"></script>
    <script src="tabs.js" type="text/javascript"></script>
    <script src="gracelib.js" type="text/javascript"></script>
    <script src="dom.js" type="text/javascript"></script>
    <script src="gtk.js" type="text/javascript"></script>
    <script src="debugger.js" type="text/javascript"></script>
    <script src="timer.js" type="text/javascript"></script>
    <script src="StandardPrelude.js" type="text/javascript"></script>
    <script src="compiler.js"></script>
    <script src="lexer.js"></script>
    <script src="ast.js"></script>
    <script src="parser.js"></script>
    <script src="genc.js"></script>
    <script src="genjs.js"></script>
    <script src="buildinfo.js"></script>
    <script src="identifierresolution.js"></script>
    <script src="genjson.js"></script>
    <script src="mgcollections.js"></script>
    <script src="xmodule.js"></script>
    <script src="unicodedata.js"></script>
    <script src="errormessages.js"></script>
    <script src="ace/ace.js"></script>
    <script src="ace/mode-grace.js" type="text/javascript" charset="utf-8"></script>
</head>
<body onload="startup();">
    <div id="text_areas">
        <!-- Begin Ace box -->
        <div id="code_area">
            <div id="tabs" class="tabbox">
                <div id="code_options">
                    <span>
                        <input type="checkbox" id="acetoggle" onchange="toggleAce()" checked />Ace
                    </span>
                    <span>
                        <input type="checkbox" id="debugtoggle" onchange="toggleDebugger()" /><a href="debugger.html">Debugger</a>
                    </span>
                </div>
                <div id="plus" onclick="addCodeTab()">+</div>
                <div class="tabbox" style="border: 1px solid transparent;"></div>
            </div>
            <br />
            
            <div style="position: relative; clear: left; float: none;">
                <div id="code_txt_real">print "Hello, world!"</div>
                <textarea id="code_txt" rows="20" cols="60"></textarea>
            </div>
        </div>
        <!-- End Ace box -->
        
        <!-- Begin output boxes -->
        <div id="output">
            <div class="tabbox">
                <div id="stdout_options">
                    <input type="checkbox" id="autoscroll" checked>Auto scroll</input>
                    <button onclick="clearstdout()">Clear output</button>
                </div>
                <span id="extra"></span>
                <div class="tab selected" onclick="outputTabManager(this, 'stdout_tab');" id="tab_stdout">Program output</div>
                <div class="tab" onclick="outputTabManager(this, 'js_tab')" id="tab_js">Generated code</div>
                <div class="tab" onclick="outputTabManager(this, 'canvas_tab')" id="tab_canvas">Canvas</div>
                <div class="tabbox" style="border: 1px solid transparent;"><br /></div>
            </div>
            
            
            <div id="js_tab" style="display: none;">
                <textarea id="js_txt" rows="20" cols="60"></textarea>
            </div>
            
            <div id="canvas_tab" style="display: none;">
                <canvas id="standard-canvas" width="500" height="250"></canvas>
            </div>
            
            <div id="stdout_tab">
                <textarea id="stdout_txt" rows="20" cols="60"></textarea>
            </div>
        </div>
        <!-- End output Boxes -->
        <div style="clear: both;"></div>
        <textarea id="stderr_txt" rows="9" cols="60"></textarea>
        <div id="debugger">
            <table style="width: 100%;"><tr><td class="debugger_td_border">
                <div id="debugger_buttons">
                    <button onclick="GraceDebugger['backStep']();go();">Back-step</button>
                    <button onclick="GraceDebugger['restart']();go()">Restart</button>
                    <button onclick="GraceDebugger['continue']();go();">Continue</button>
                    <button onclick="GraceDebugger['step']();go()">Step</button>
                </div>
        
                <div class="breakpoints">
                    Breakpoints <!--(<span id="debugger_module">main</span>)-->
                    <div id="breakpoints">
                        <span style="color: #aaa;">(No breakpoints added yet)</span>
                    </div>
                    <button onclick="GraceDebugger.breakpoints.add();" id="bpadd">Add a breakpoint</button> <input id="add_break" />
                </div>
            </td><td class="debugger_td_border">
                <div id="debugger_vars_display">
                    Variables: 
                    <div></div>
                </div>
            </td></tr></table>
        </div>
    </div>

    <div style="clear: both;"></div>

    <input type="button" id="compilerun_but" value="Go" onclick="go()" />
    Target:
    <select id="mode" onchange="modeswitch()">
       <option value="js" />JavaScript
       <option value="c" />C
       <option value="lex" />Tokens
       <option value="parse" />AST
       <option value="grace" />Grace
       <option value="testall" />All tests (slow)
   </select>
    Module name: <input type="text" value="main" id="modname" size="16"
    onchange='this.selected.changeName(this.value);'/>
    Visibility:
    <select id="defaultVisibility" onchange="selectvisibility();">
      <option value="standard">Standard
      <option value="public">All accessible
    </select>
    <span style="font-size: smaller;">
    minigrace-js
    <!--[!SH[echo "v$(tools/calculate-version HEAD)"]!]-->
    /
    <!--[!SH[git rev-parse HEAD|cut -b1-7]!]-->
    </span>
    <br />
    <input type="button" value="Load test case:" onclick="loadtest(document.getElementById('testcases').value)" />
    <select id="testcases">
<!--[!SH[ls tests | grep _test.grace | while read fn ; do if echo "$fn" | grep -q fail ; then o=$(echo "$fn"|cut -d_ -f1-3) ; else o=$(echo "$fn"|cut -d_ -f1-2) ; fi ; o2=$(sed -e s/^t//<<<$o) ; echo "  <option value=\"$o\">$o2</option>" ; done]!]-->
    </select>
    <input type="button" value="Load sample:" onclick="loadsample(document.getElementById('sample').value)" />
    <select id="sample"><option></option><!--Will be populated dynamically//--></select>
    <br />

    
    <hr />
    
    <div id="files"></div>
    <button onclick="addFileLine();">Add a file</button>
    <button onclick="saveCurrentTab();">Save current tab</button>
</body>
</html>
